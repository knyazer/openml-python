::::: only
html

:::: {.note .sphx-glr-download-link-note}
::: title
Note
:::

`Go to the end <sphx_glr_download_examples_30_extended_flow_id_tutorial.py>`{.interpreted-text
role="ref"} to download the full example code
::::
:::::

::: rst-class
sphx-glr-example-title
:::

# Obtaining Flow IDs {#sphx_glr_examples_30_extended_flow_id_tutorial.py}

This tutorial discusses different ways to obtain the ID of a flow in
order to perform further analysis.

``` default
# License: BSD 3-Clause

import sklearn.tree

import openml
```

:::: warning
::: title
Warning
:::

.. include:: ../../test_server_usage_warning.txt
::::

``` default
openml.config.start_using_configuration_for_example()
```

::: rst-class
sphx-glr-script-out

``` none
/code/openml/config.py:184: UserWarning: Switching to the test server https://test.openml.org/api/v1/xml to not upload results to the live server. Using the test server may result in reduced performance of the API!
  warnings.warn(
```
:::

Defining a classifier

``` default
clf = sklearn.tree.DecisionTreeClassifier()
```

## 1. Obtaining a flow given a classifier

``` default
flow = openml.extensions.get_extension_by_model(clf).model_to_flow(clf).publish()
flow_id = flow.flow_id
print(flow_id)
```

::: rst-class
sphx-glr-script-out

``` none
4595
```
:::

This piece of code is rather involved. First, it retrieves a
`~openml.extensions.Extension`{.interpreted-text role="class"} which is
registered and can handle the given model, in our case it is
`openml.extensions.sklearn.SklearnExtension`{.interpreted-text
role="class"}. Second, the extension converts the classifier into an
instance of `openml.OpenMLFlow`{.interpreted-text role="class"}. Third
and finally, the publish method checks whether the current flow is
already present on OpenML. If not, it uploads the flow, otherwise, it
updates the current instance with all information computed by the server
(which is obviously also done when uploading/publishing a flow).

To simplify the usage we have created a helper function which automates
all these steps:

``` default
flow_id = openml.flows.get_flow_id(model=clf)
print(flow_id)
```

::: rst-class
sphx-glr-script-out

``` none
4595
```
:::

## 2. Obtaining a flow given its name

The schema of a flow is given in XSD
([here](https://github.com/openml/OpenML/blob/master/openml_OS/views/pages/api_new/v1/xsd/openml.implementation.upload.xsd)).
\# noqa E501 Only two fields are required, a unique name, and an
external version. While it should be pretty obvious why we need a name,
the need for the additional external version information might not be
immediately clear. However, this information is very important as it
allows to have multiple flows with the same name for different versions
of a software. This might be necessary if an algorithm or implementation
introduces, renames or drop hyperparameters over time.

``` default
print(flow.name, flow.external_version)
```

::: rst-class
sphx-glr-script-out

``` none
sklearn.tree._classes.DecisionTreeClassifier openml==0.14.1,sklearn==1.3.0
```
:::

The name and external version are automatically added to a flow when
constructing it from a model. We can then use them to retrieve the flow
id as follows:

``` default
flow_id = openml.flows.flow_exists(name=flow.name, external_version=flow.external_version)
print(flow_id)
```

::: rst-class
sphx-glr-script-out

``` none
4595
```
:::

We can also retrieve all flows for a given name:

``` default
flow_ids = openml.flows.get_flow_id(name=flow.name)
print(flow_ids)
```

::: rst-class
sphx-glr-script-out

``` none
[22, 26, 30, 267, 1178, 4102, 4112, 4127, 4595, 6211]
```
:::

This also works with the actual model (generalizing the first part of
this example):

``` default
flow_ids = openml.flows.get_flow_id(model=clf, exact_version=False)
print(flow_ids)

# Deactivating test server
openml.config.stop_using_configuration_for_example()
```

::: rst-class
sphx-glr-script-out

``` none
[22, 26, 30, 267, 1178, 4102, 4112, 4127, 4595, 6211]
```
:::

::: rst-class
sphx-glr-timing

**Total running time of the script:** ( 0 minutes 4.274 seconds)
:::

::::::: {#sphx_glr_download_examples_30_extended_flow_id_tutorial.py}
:::::: only
html

::::: {.container .sphx-glr-footer .sphx-glr-footer-example}
::: {.container .sphx-glr-download .sphx-glr-download-python}
`Download Python source code: flow_id_tutorial.py <flow_id_tutorial.py>`{.interpreted-text
role="download"}
:::

::: {.container .sphx-glr-download .sphx-glr-download-jupyter}
`Download Jupyter notebook: flow_id_tutorial.ipynb <flow_id_tutorial.ipynb>`{.interpreted-text
role="download"}
:::
:::::
::::::
:::::::

:::: only
html

::: rst-class
sphx-glr-signature

[Gallery generated by Sphinx-Gallery](https://sphinx-gallery.github.io)
:::
::::
